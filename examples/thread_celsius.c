#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

static const double five_ninths = 5.0/9.0;

double celsius(double fahrenheit) {
  return (fahrenheit - 32) * five_ninths;
}

int main(int argc, char** argv) {
  if (argc != 2) {
    printf("\nError: Missing Argument\nusage: \n\t./thread_celsius <number of processes to fork>\n\n");
    return -1;
  }
  int number = atoi(argv[1]);
  for(int i =  1; i <= number; i++) {
    double f_value = 100 + (i*10);
    pid_t child = fork();
    if (child == 0) { // this is a child process
      double c_value = celsius(f_value);
      printf("%f F is %f C (pid %d)\n", f_value, c_value, getpid());
      exit(0);
    }
  }
  
  printf("Spawned %d processes from %d\n", number, getpid());
}